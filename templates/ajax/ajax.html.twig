<!DOCTYPE html>
<html lang="de" x-ajax-intention="inline">
    <body>
        <div id="gma" class="game-menu-area">
            <div class="game-bar">
                {% block text_menu_content %}
                    <ul class="text-menu">
                        <li class="burger-button"><i class="fa fa-bars"></i></li>
                        {% if is_granted('ROLE_REGISTERED') %}
                            <li class="forum">Forum</li>
                        {% endif %}
                        {% block menu_text %}{% endblock %}
                        {% if is_granted('ROLE_REGISTERED') %}
                            <li class="soul">Deine Seele</li>
                        {% endif %}
                        <li class="help">Hilfe</li>
                    </ul>
                {% endblock %}
                {% block menu_bar %}{% endblock %}
            </div>
            <div class="game-dropdown hidden" style="height: 0">
                {{ block('text_menu_content') }}
            </div>
        </div>
        {% block ajax %}
        {% endblock %}
    </body>
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <x-message x-label="{{ label }}">{{ message|raw }}</x-message>
        {% endfor %}
    {% endfor %}
    {% block js %}
        <script>
            document.querySelector('#gma>.game-bar .burger-button').addEventListener('click', function() {
                let dropdown = document.querySelector('#gma>.game-dropdown');
                dropdown.classList.toggle('hidden');
                if (dropdown.classList.contains('hidden'))
                    dropdown.style.height = '0px';
                else {
                    const target_height = document.querySelector('#gma .game-dropdown > ul.text-menu').getBoundingClientRect().height;
                    dropdown.style.height = Math.ceil(target_height) + 'px';
                }
            });
        </script>
    {% endblock %}
</html>